<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="recuperar.titulo">Recuperar Contraseña - EduAventuras</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Recovery CSS -->
    <link rel="stylesheet" href="css/recovery.css">
    <!-- i18n CSS -->
    <link rel="stylesheet" href="css/i18n.css">
</head>
<body>

<div class="recovery-container">
    <!-- Logo -->
    <div class="logo-container"><div class="text-end mb-3">
        <div id="selector-idioma"></div>
    </div>

        <img src="assets/images/Logo-Eduaventuras.svg" alt="EduAventuras">
    </div>

    <!-- Selector de idioma -->


    <!-- Paso 1: Solicitar Email -->
    <div id="paso1" class="recovery-step active">
        <div class="recovery-header">
            <h2 data-i18n="recuperar.titulo">Recuperar Contraseña</h2>
            <p data-i18n="recuperar.subtitulo">
                Ingresa tu email y te enviaremos un enlace para restablecer tu contraseña
            </p>
        </div>

        <form id="formSolicitarToken" class="recovery-form">
            <div class="form-group">
                <label for="emailRecuperacion" data-i18n="recuperar.email">Email</label>
                <input
                        type="email"
                        class="form-control"
                        id="emailRecuperacion"
                        data-i18n-placeholder="recuperar.emailPlaceholder"
                        placeholder="tu@email.com"
                        required
                >
            </div>

            <button type="submit" class="btn-primary-custom" data-i18n="recuperar.btnEnviar">
                Enviar Enlace
            </button>
        </form>

        <div class="recovery-links">
            <a href="login.html" data-i18n="recuperar.volverLogin">← Volver al inicio de sesión</a>
        </div>
    </div>

    <!-- Paso 2: Confirmar Envío -->
    <div id="paso2" class="recovery-step">
        <div class="alert-custom alert-success">
            <h4 data-i18n="recuperar.emailEnviado">✅ Enlace Enviado</h4>
            <p data-i18n="recuperar.mensajeEnviado">
                Si el email existe en nuestro sistema, recibirás un enlace de recuperación.
            </p>
            <p style="margin-top: 1rem;">
                <strong data-i18n="recuperar.paraTesting">Para testing:</strong><br>
                <a id="enlaceRecuperacion" href="#" target="_blank">
                    Click aquí para restablecer tu contraseña
                </a>
            </p>
        </div>

        <div class="recovery-links">
            <a href="login.html" data-i18n="recuperar.irLogin">Ir a iniciar sesión</a>
        </div>
    </div>

    <!-- Paso 3: Nueva Contraseña -->
    <div id="paso3" class="recovery-step">
        <div class="recovery-header">
            <h2 data-i18n="recuperar.nuevaPassword">Nueva Contraseña</h2>
            <p data-i18n="recuperar.ingresaNueva">Ingresa tu nueva contraseña</p>
        </div>

        <form id="formNuevaPassword" class="recovery-form">
            <input type="hidden" id="tokenRecuperacion">

            <div class="form-group">
                <label for="passwordNueva" data-i18n="recuperar.passwordNueva">Nueva Contraseña</label>
                <input
                        type="password"
                        class="form-control"
                        id="passwordNueva"
                        data-i18n-placeholder="recuperar.passwordPlaceholder"
                        placeholder="Mínimo 6 caracteres"
                        minlength="6"
                        required
                >
            </div>

            <div class="form-group">
                <label for="passwordConfirmar" data-i18n="recuperar.confirmarPassword">Confirmar Contraseña</label>
                <input
                        type="password"
                        class="form-control"
                        id="passwordConfirmar"
                        data-i18n-placeholder="recuperar.confirmarPlaceholder"
                        placeholder="Repite tu contraseña"
                        minlength="6"
                        required
                >
            </div>

            <button type="submit" class="btn-primary-custom" data-i18n="recuperar.btnRestablecer">
                Restablecer Contraseña
            </button>
        </form>
    </div>

    <!-- Contenedor de alertas -->
    <div id="alertContainer"></div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- i18n Module -->
<script src="js/i18n.js"></script>
<!-- Auth Module -->
<script src="js/auth.js"></script>
<!-- Recuperar Password JS -->
<script src="js/recuperar-password.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof i18n !== 'undefined') {
            i18n.crearSelectorIdioma();
        }
    });
</script>

</body>
</html>